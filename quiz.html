<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Interactieve Quiz met Matrix-animatie</title>
  <style>
    /* Donker hacker-thema */
    body {
      margin: 0;
      font-family: 'Courier New', Courier, monospace;
      background-color: #111;
      color: #e0e0e0;
      overflow: hidden;
      font-size: 18px;
    }
    .quiz-container {
      position: relative;
      width: 100vw;
      height: 100vh;
    }
    /* Algemene schermstijl met overgang voor transform */
    .screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      transition: transform 0.5s ease;
    }
    /* Flex-container voor vraag/opties en media (50/50) */
    .content-wrapper {
      display: flex;
      width: 100%;
      height: 100%;
    }
    /* Linker helft: vraag-container met inhoud op ongeveer 25% vanaf de bovenkant */
    .question-container {
      width: 50%;
      padding: 20px;
      box-sizing: border-box;
      padding-top: 25vh;
    }
    .question-container h2,
    .question-container p,
    .options-container,
    .option label {
      animation: fadeIn 0.5s ease-in;
      font-size: 1.2em;
    }
    /* Rechter helft: media-container met gecentreerde inhoud */
    .media-container {
      width: 50%;
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    /* Afbeeldingen: standaard volledig de schermhoogte met object-fit: cover */
    .media-container img {
      height: 100vh;
      width: auto;
      object-fit: cover;
      display: block;
      margin: 0 auto;
    }
    /* Voor afbeeldingen die niet bijgesneden mogen worden */
    .media-container.no-crop img {
      height: auto;
      max-height: 100vh;
      width: auto;
      object-fit: contain;
    }
    /* Voor het laatste scherm: maak de afbeelding extra klein (20% van de schermhoogte) */
    .media-container.no-crop.last img {
      max-height: 20vh;
    }
    /* Video-container voor YouTube-filmpjes met 16:9 aspectratio */
    .video-container {
      position: relative;
      width: 100%;
      height: 0;
      padding-bottom: 56.25%; /* 16:9 ratio */
      overflow: hidden;
    }
    .video-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }
    .options-container {
      margin-top: 20px;
    }
    .option {
      margin-bottom: 10px;
    }
    /* Eindscherm styling met Matrix-animatie */
    .final-screen {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    /* Canvas vult de hele achtergrond */
    #matrix {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      background-color: #000;
    }
    /* Eindcontainer: gecentreerd in het midden met vaste afmetingen (ongeveer 25% van het scherm) en solide achtergrond */
    .final-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 25vw;
      padding: 20px;
      background-color: #000; /* Solide achtergrondkleur */
      text-align: center;
      z-index: 1;
      font-size: 1.3em;
    }
    /* Navigatieknoppen */
    .nav-buttons {
      position: absolute;
      bottom: 20px;
      width: 100%;
      text-align: center;
      z-index: 2;
    }
    .nav-buttons button {
      background-color: #333;
      color: #e0e0e0;
      border: none;
      padding: 10px 20px;
      margin: 0 10px;
      cursor: pointer;
      font-size: 18px;
      transition: background-color 0.3s;
    }
    .nav-buttons button:hover:not(:disabled) {
      background-color: #555;
    }
    .nav-buttons button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <div class="quiz-container" id="quiz-container">
    <!-- Schermen worden dynamisch opgebouwd -->
  </div>

  <div class="nav-buttons">
    <button id="prevBtn">Vorige</button>
    <button id="nextBtn" disabled>Volgende</button>
  </div>

  <script>
    // Klasse 'Scherm' definieert een vragenscherm met vraag, media en multiplechoice-opties.
    // De optionele parameter 'crop' (standaard true) geeft aan of de afbeelding bijgesneden mag worden.
    class Scherm {
      /**
       * @param {string} vraag - De vraagtekst.
       * @param {string} mediaHTML - HTML-code voor de media.
       * @param {Array} opties - Array van opties; elk object bevat 'text' en 'value'
       * @param {boolean} [crop=true] - Of de afbeelding bijgesneden mag worden.
       */
      constructor(vraag, mediaHTML, opties, crop = true) {
        this.vraag = vraag;
        this.mediaHTML = mediaHTML;
        this.opties = opties;
        this.crop = crop;
      }
    }

    // Array met vier vragenschermen. Bij het laatste scherm staat crop op false.
    const vraagSchermen = [
      new Scherm(
        "Hoe moeilijk vond je de vorige studietaken van probleem oplossend programmeren?",
        `<img src="https://www.metronieuws.nl/wp-content/uploads/2019/05/3de9ad0635a374f1914f1af1c7c37843.jpg" alt="Afbeelding 1">`,
        [
          { text: "Makkelijk", value: 0 },
          { text: "Niet makkelijk/moeilijk", value: 1 },
          { text: "Moeilijk", value: 2 }
        ]
      ),
      new Scherm(
        "Heb je voor de vorige opdrachten veel gebruik moeten maken van LLM's zoals chatGPT?",
        `<div class="video-container">
           <iframe src="https://www.youtube.com/embed/BBaJttSjAHk" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
         </div>`,
        [
          { text: "Veel", value: -2 },
          { text: "Af en toe", value: 0 },
          { text: "weinig", value: 1 }
        ]
      ),
      new Scherm(
        "Heb je al eerder met lussen (zoals for-loops, while) gewerkt op een eerdere opleiding?",
        `<img src="https://www.lotus-qa.com/wp-content/uploads/2020/02/testing.jpg" alt="Afbeelding 3">`,
        [
          { text: "nee,", value: 0 },
          { text: "een beetje", value: 1 },
          { text: "Ik kan lussen al gebruiken", value: 2 }
        ]
      ),
      new Scherm(
        "Begrijp je de volgende code zonder gebruik te maken van een LLM (zoals chatgpt)?",
        `<img src="https://allinpython.com/wp-content/uploads/2022/07/for-loop-syntax-1024x409.png" alt="For loop syntax">`,
        [
          { text: "Nee,", value: 0 },
          { text: "Een beetje", value: 1 },
          { text: "Ja", value: 2 }
        ],
        false  // Deze afbeelding wordt niet bijgesneden.
      )
    ];

    const quizContainer = document.getElementById('quiz-container');

    // Bouw de vragenschermen op
    vraagSchermen.forEach((scherm, index) => {
      const div = document.createElement('div');
      div.classList.add('screen');
      if (index === 0) {
        div.style.display = 'block';
        div.style.transform = 'translateX(0)';
      } else {
        div.style.display = 'none';
      }
      
      let optiesHTML = `<div class="options-container">`;
      scherm.opties.forEach(optie => {
        optiesHTML += `
          <div class="option">
            <input type="radio" id="q${index}-option${optie.value}" name="question${index}" value="${optie.value}">
            <label for="q${index}-option${optie.value}">${optie.text}</label>
          </div>
        `;
      });
      optiesHTML += `</div>`;

      // Voeg extra klasse 'no-crop' toe als crop false is.
      // Voor het laatste scherm voegen we extra 'last' toe.
      const mediaClass = scherm.crop 
        ? 'media-container' 
        : 'media-container no-crop' + (index === vraagSchermen.length - 1 ? ' last' : '');

      div.innerHTML = `
        <div class="content-wrapper">
          <div class="question-container">
            <h2>Vraag ${index + 1}</h2>
            <p>${scherm.vraag}</p>
            ${optiesHTML}
          </div>
          <div class="${mediaClass}">
            ${scherm.mediaHTML}
          </div>
        </div>
      `;
      quizContainer.appendChild(div);
    });

    // Maak het eindscherm met Matrix-animatie aan
    const finalScreen = document.createElement('div');
    finalScreen.classList.add('screen', 'final-screen');
    finalScreen.style.display = 'none';
    finalScreen.innerHTML = `
      <canvas id="matrix"></canvas>
      <div class="final-content">
        <h2>Eindscore</h2>
        <p id="score-display">Je score is: 0</p>
      </div>
    `;
    quizContainer.appendChild(finalScreen);

    const screens = document.querySelectorAll('.screen');
    let currentScreen = 0;
    const nextBtn = document.getElementById('nextBtn');
    const prevBtn = document.getElementById('prevBtn');

    function updateNavButtons() {
      prevBtn.style.display = currentScreen === 0 ? 'none' : 'inline-block';
      nextBtn.style.display = currentScreen === screens.length - 1 ? 'none' : 'inline-block';
    }

    function updateNextButtonState() {
      if (currentScreen >= vraagSchermen.length) {
        nextBtn.disabled = true;
        return;
      }
      const selected = document.querySelector(`input[name="question${currentScreen}"]:checked`);
      nextBtn.disabled = !selected;
    }

    document.addEventListener('change', (e) => {
      if (e.target.matches('input[type="radio"]')) {
        updateNextButtonState();
      }
    });

    function updateScore() {
      let totalScore = 0;
      for (let i = 0; i < vraagSchermen.length; i++) {
        const selected = document.querySelector(`input[name="question${i}"]:checked`);
        if (selected) {
          totalScore += parseInt(selected.value, 10);
        }
      }
      document.getElementById('score-display').textContent = `Je score is: ${totalScore}`;
    }

    function animateTransition(newIndex, direction) {
      const current = screens[currentScreen];
      const target = screens[newIndex];
      target.style.display = 'block';

      if (direction === 'next') {
        target.style.transform = 'translateX(100%)';
        target.offsetWidth;
        current.style.transform = 'translateX(-100%)';
        target.style.transform = 'translateX(0)';
      } else if (direction === 'prev') {
        target.style.transform = 'translateX(-100%)';
        target.offsetWidth;
        current.style.transform = 'translateX(100%)';
        target.style.transform = 'translateX(0)';
      }

      current.addEventListener('transitionend', function handler(event) {
        if (event.propertyName !== 'transform') return;
        current.style.display = 'none';
        current.style.transform = '';
        target.style.transform = '';
        current.removeEventListener('transitionend', handler);
      });

      currentScreen = newIndex;
      if (currentScreen === screens.length - 1) {
        updateScore();
        startMatrix(); // Start de Matrix-animatie op het eindscherm.
      }
      updateNextButtonState();
      updateNavButtons();
    }

    nextBtn.addEventListener('click', () => {
      if (currentScreen < vraagSchermen.length) {
        const selected = document.querySelector(`input[name="question${currentScreen}"]:checked`);
        if (!selected) return;
      }
      if (currentScreen < screens.length - 1) {
        animateTransition(currentScreen + 1, 'next');
      }
    });

    prevBtn.addEventListener('click', () => {
      if (currentScreen > 0) {
        animateTransition(currentScreen - 1, 'prev');
      }
    });

    updateNextButtonState();
    updateNavButtons();

    // Matrix-animatie met canvas
    function startMatrix() {
      const canvas = document.getElementById("matrix");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      const lettersArr = letters.split("");
      const fontSize = 16;
      const columns = canvas.width / fontSize;
      const drops = Array.from({ length: columns }, () => 1);

      function draw() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#0F0";
        ctx.font = fontSize + "px arial";
        for (let i = 0; i < drops.length; i++) {
          const text = lettersArr[Math.floor(Math.random() * lettersArr.length)];
          ctx.fillText(text, i * fontSize, drops[i] * fontSize);
          if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
            drops[i] = 0;
          }
          drops[i]++;
        }
      }
      setInterval(draw, 33);
    }
  </script>
</body>
</html>
