<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Interactieve Quiz met Matrix-animatie</title>
  <style>
    /* Donker hacker-thema */
    body {
      margin: 0;
      font-family: 'Courier New', Courier, monospace;
      background-color: #111;
      color: #e0e0e0;
      overflow: hidden;
      font-size: 18px;
    }
    .quiz-container {
      position: relative;
      width: 100vw;
      height: 100vh;
    }
    /* Algemene schermstijl met overgang voor transform */
    .screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      transition: transform 0.5s ease;
    }
    /* Flex-container voor vraag/opties en media (50/50) */
    .content-wrapper {
      display: flex;
      width: 100%;
      height: 100%;
    }
    /* Linker helft: vraag-container met inhoud op ongeveer 25% vanaf de bovenkant */
    .question-container {
      width: 50%;
      padding: 20px;
      box-sizing: border-box;
      padding-top: 25vh;
    }
    .question-container h2,
    .question-container p,
    .options-container,
    .option label {
      animation: fadeIn 0.5s ease-in;
      font-size: 1.2em;
    }
    /* Rechter helft: media-container met gecentreerde inhoud */
    .media-container {
      width: 50%;
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    /* Afbeeldingen: standaard volledig de schermhoogte met object-fit: cover */
    .media-container img {
      height: 100vh;
      width: auto;
      object-fit: cover;
      display: block;
      margin: 0 auto;
    }
    /* Voor afbeeldingen die niet bijgesneden mogen worden */
    .media-container.no-crop img {
      height: auto;
      max-height: 100vh;
      width: auto;
      object-fit: contain;
    }
    /* Voor het laatste scherm: maak de afbeelding extra klein (20% van de schermhoogte) */
    .media-container.no-crop.last img {
      max-height: 20vh;
    }
    /* Video-container voor YouTube-filmpjes met 16:9 aspectratio */
    .video-container {
      position: relative;
      width: 100%;
      height: 0;
      padding-bottom: 56.25%; /* 16:9 ratio */
      overflow: hidden;
    }
    .video-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }
    .options-container {
      margin-top: 20px;
    }
    .option {
      margin-bottom: 10px;
    }
    /* Eindscherm styling met Matrix-animatie */
    .final-screen {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    /* Canvas vult de hele achtergrond */
    #matrix {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      background-color: #000;
    }
    /* Eindcontainer: gecentreerd in het midden, neemt 80% van de viewport in */
    .final-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 80vw;
      height: 80vh;
      padding: 20px;
      background-color: #000;
      text-align: center;
      z-index: 1;
      font-size: 1.3em;
      overflow-y: auto;
    }
    /* Navigatieknoppen */
    .nav-buttons {
      position: absolute;
      bottom: 20px;
      width: 100%;
      text-align: center;
      z-index: 2;
    }
    .nav-buttons button {
      background-color: #333;
      color: #e0e0e0;
      border: none;
      padding: 10px 20px;
      margin: 0 10px;
      cursor: pointer;
      font-size: 18px;
      transition: background-color 0.3s;
    }
    .nav-buttons button:hover:not(:disabled) {
      background-color: #555;
    }
    .nav-buttons button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <div class="quiz-container" id="quiz-container">
    <!-- Schermen worden dynamisch opgebouwd -->
  </div>

  <div class="nav-buttons">
    <button id="prevBtn">Vorige</button>
    <button id="nextBtn" disabled>Volgende</button>
  </div>

  <script>
    // Klasse 'Scherm' definieert een vragenscherm met vraag, media en multiplechoice-opties.
    class Scherm {
      /**
       * @param {string} vraag - De vraagtekst.
       * @param {string} mediaHTML - HTML-code voor de media.
       * @param {Array} opties - Array van opties; elk object bevat 'text' en 'value'
       * @param {boolean} [crop=true] - Of de afbeelding bijgesneden mag worden.
       */
      constructor(vraag, mediaHTML, opties, crop = true) {
        this.vraag = vraag;
        this.mediaHTML = mediaHTML;
        this.opties = opties;
        this.crop = crop;
      }
    }

    // Array met vier vragenschermen. Bij het laatste scherm staat crop op false.
    const vraagSchermen = [
      new Scherm(
        "Hoe moeilijk vond je de vorige studietaken van probleem oplossend programmeren?",
        `<img src="https://www.metronieuws.nl/wp-content/uploads/2019/05/3de9ad0635a374f1914f1af1c7c37843.jpg" alt="Afbeelding 1">`,
        [
          { text: "Makkelijk", value: 0 },
          { text: "Niet makkelijk/moeilijk", value: 1 },
          { text: "Moeilijk", value: 2 }
        ]
      ),
      new Scherm(
        "Heb je voor de vorige opdrachten veel gebruik moeten maken van LLM's zoals chatGPT?",
        `<div class="video-container">
           <iframe src="https://www.youtube.com/embed/BBaJttSjAHk" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
         </div>`,
        [
          { text: "Veel", value: -2 },
          { text: "Af en toe", value: 0 },
          { text: "weinig", value: 1 }
        ]
      ),
      new Scherm(
        "Heb je al eerder met lussen (zoals for-loops, while) gewerkt op een eerdere opleiding?",
        `<img src="https://www.lotus-qa.com/wp-content/uploads/2020/02/testing.jpg" alt="Afbeelding 3">`,
        [
          { text: "nee,", value: 0 },
          { text: "een beetje", value: 1 },
          { text: "Ik kan lussen al gebruiken", value: 2 }
        ]
      ),
      new Scherm(
        "Begrijp je de volgende code zonder gebruik te maken van een LLM (zoals chatgpt)?",
        `<img src="https://allinpython.com/wp-content/uploads/2022/07/for-loop-syntax-1024x409.png" alt="For loop syntax">`,
        [
          { text: "Nee,", value: 0 },
          { text: "Een beetje", value: 1 },
          { text: "Ja", value: 2 }
        ],
        false
      )
    ];

    const quizContainer = document.getElementById('quiz-container');

    // Bouw de vragenschermen op
    vraagSchermen.forEach((scherm, index) => {
      const div = document.createElement('div');
      div.classList.add('screen');
      div.style.display = index === 0 ? 'block' : 'none';
      div.style.transform = index === 0 ? 'translateX(0)' : '';
      
      let optiesHTML = `<div class="options-container">`;
      scherm.opties.forEach(optie => {
        optiesHTML += `
          <div class="option">
            <input type="radio" id="q${index}-option${optie.value}" name="question${index}" value="${optie.value}">
            <label for="q${index}-option${optie.value}">${optie.text}</label>
          </div>
        `;
      });
      optiesHTML += `</div>`;

      const mediaClass = scherm.crop 
        ? 'media-container' 
        : 'media-container no-crop' + (index === vraagSchermen.length - 1 ? ' last' : '');

      div.innerHTML = `
        <div class="content-wrapper">
          <div class="question-container">
            <h2>Vraag ${index + 1}</h2>
            <p>${scherm.vraag}</p>
            ${optiesHTML}
          </div>
          <div class="${mediaClass}">
            ${scherm.mediaHTML}
          </div>
        </div>
      `;
      quizContainer.appendChild(div);
    });

    // Maak het eindscherm met Matrix-animatie aan
    const finalScreen = document.createElement('div');
    finalScreen.classList.add('screen', 'final-screen');
    finalScreen.style.display = 'none';
    finalScreen.innerHTML = `
      <canvas id="matrix"></canvas>
      <div class="final-content">
        <h2>Aanbeveling</h2>
        <p id="result-text">Uit de test blijkt dat de opdrachten met de volgende labels het best bij je passen:</p>
        <!-- Labels worden hier toegevoegd -->
        <div id="labels-container"></div>
        <!-- Aanbevelingstekst wordt hier geplaatst -->
        <p id="final-message"></p>
      </div>
    `;
    quizContainer.appendChild(finalScreen);

    const screens = document.querySelectorAll('.screen');
    let currentScreen = 0;
    const nextBtn = document.getElementById('nextBtn');
    const prevBtn = document.getElementById('prevBtn');

    function updateNavButtons() {
      if (currentScreen === 0) {
        prevBtn.style.display = 'none';
      } else {
        prevBtn.style.display = 'inline-block';
      }
      if (currentScreen === screens.length - 1) {
        prevBtn.textContent = "maak de quiz opnieuw";
        prevBtn.style.backgroundColor = 'red';
        nextBtn.style.display = 'none';
      } else {
        prevBtn.textContent = "Vorige";
        prevBtn.style.backgroundColor = '#333';
        nextBtn.style.display = 'inline-block';
      }
    }

    function updateNextButtonState() {
      if (currentScreen >= vraagSchermen.length) {
        nextBtn.disabled = true;
        return;
      }
      const selected = document.querySelector(`input[name="question${currentScreen}"]:checked`);
      nextBtn.disabled = !selected;
    }

    document.addEventListener('change', (e) => {
      if (e.target.matches('input[type="radio"]')) {
        updateNextButtonState();
      }
    });

    function updateScore() {
      let totalScore = 0;
      for (let i = 0; i < vraagSchermen.length; i++) {
        const selected = document.querySelector(`input[name="question${i}"]:checked`);
        if (selected) {
          totalScore += parseInt(selected.value, 10);
        }
      }
      
      const labelsContainer = document.getElementById('labels-container');
      labelsContainer.innerHTML = '';

      // Bepaal welke profielen aanwezig zijn
      let hasExpert = false, hasSkilled = false, hasAspiring = false;
      if (totalScore > 5) {
        hasExpert = true;
        const expertLabel = document.createElement('span');
        expertLabel.textContent = 'expert developer';
        expertLabel.style.backgroundColor = 'red';
        expertLabel.style.color = 'white';
        expertLabel.style.padding = '5px 10px';
        expertLabel.style.marginRight = '5px';
        expertLabel.style.borderRadius = '5px';
        labelsContainer.appendChild(expertLabel);
      }
      if (totalScore >= 3 && totalScore <= 6) {
        hasSkilled = true;
        const skilledLabel = document.createElement('span');
        skilledLabel.textContent = 'skilled developer';
        skilledLabel.style.backgroundColor = 'green';
        skilledLabel.style.color = 'white';
        skilledLabel.style.padding = '5px 10px';
        skilledLabel.style.marginRight = '5px';
        skilledLabel.style.borderRadius = '5px';
        labelsContainer.appendChild(skilledLabel);
      }
      if (totalScore >= -100 && totalScore <= 4) {
        hasAspiring = true;
        const aspiringLabel = document.createElement('span');
        aspiringLabel.textContent = 'aspiring developer';
        aspiringLabel.style.backgroundColor = 'blue';
        aspiringLabel.style.color = 'white';
        aspiringLabel.style.padding = '5px 10px';
        aspiringLabel.style.marginRight = '5px';
        aspiringLabel.style.borderRadius = '5px';
        labelsContainer.appendChild(aspiringLabel);
      }

      const resultTextElement = document.getElementById('result-text');
      if (labelsContainer.childNodes.length === 1) {
        resultTextElement.textContent = "Uit de test blijkt dat de opdrachten met de volgende label het best bij je past:";
      } else {
        resultTextElement.textContent = "Uit de test blijkt dat de opdrachten met de volgende labels het best bij je passen:";
      }
      
      // Bouw de aanbevelingstekst op basis van de combinatie
      let finalMessageText = "";
      if (hasAspiring && !hasSkilled && !hasExpert) {
        finalMessageText = "Aangezien je profiel de kenmerken van een aspiring developer toont, wordt aanbevolen om de aspiring developer opdrachten te maken. Deze opdrachten zijn uitdagend maar speciaal bedoeld voor beginnende programmeurs. Expert developer opdrachten wordt afgeraden.";
      } else if (hasSkilled && !hasAspiring && !hasExpert) {
        finalMessageText = "Je resultaat duidt op vaardigheden die passen bij een skilled developer. Je kunt beginnen met de opdrachten voor een skilled developer. Je mag eventueel de expert developer opdrachten bekijken, maar investeer hier niet te veel tijd in.";
      } else if (hasExpert && !hasSkilled && !hasAspiring) {
        finalMessageText = "Je profiel laat zien dat je een expert developer bent. We adviseren je daarom om uitsluitend de meest uitdagende, expert-level opdrachten te doen.";
      } else if (hasSkilled && hasExpert && !hasAspiring) {
        // Nu de nuance voor een combinatie van skilled en expert
        finalMessageText = "Je resultaat toont zowel de solide basis van een skilled developer als de complexiteit van een expert developer. Begin met de opdrachten voor skilled developers om je fundament te versterken, en als je merkt dat je deze beheerst, kun je geleidelijk de meest uitdagende expert-level opdrachten oppakken. Zorg dat je de basis eerst goed op orde hebt voordat je overgaat op de hoogste uitdagingen.";
      } else {
        // Voor andere combinaties met meerdere aspecten, inclusief aspirant
        finalMessageText = "Je resultaat toont een genuanceerd profiel met meerdere aspecten. ";
        if (hasAspiring) {
          finalMessageText += "De aspiring developer opdrachten bieden een goede basis voor beginnende programmeurs, ";
        }
        if (hasSkilled) {
          finalMessageText += "terwijl de skilled developer opdrachten je vaardigheden verder ontwikkelen. ";
        }
        if (hasExpert) {
          finalMessageText += "Expert developer opdrachten zijn zeer uitdagend; doe deze alleen als je zeker bent van je vaardigheden. ";
        }
        finalMessageText += "Kijk welke opdrachten het beste bij jouw combinatie passen en werk stap voor stap aan je ontwikkeling.";
      }
      document.getElementById('final-message').textContent = finalMessageText;
    }

    function animateTransition(newIndex, direction) {
      const current = screens[currentScreen];
      const target = screens[newIndex];
      target.style.display = 'block';

      if (direction === 'next') {
        target.style.transform = 'translateX(100%)';
        target.offsetWidth;
        current.style.transform = 'translateX(-100%)';
        target.style.transform = 'translateX(0)';
      } else if (direction === 'prev') {
        target.style.transform = 'translateX(-100%)';
        target.offsetWidth;
        current.style.transform = 'translateX(100%)';
        target.style.transform = 'translateX(0)';
      }

      current.addEventListener('transitionend', function handler(event) {
        if (event.propertyName !== 'transform') return;
        current.style.display = 'none';
        current.style.transform = '';
        target.style.transform = '';
        current.removeEventListener('transitionend', handler);
      });

      currentScreen = newIndex;
      if (currentScreen === screens.length - 1) {
        updateScore();
        startMatrix();
      }
      updateNextButtonState();
      updateNavButtons();
    }

    function resetQuiz() {
      const inputs = document.querySelectorAll('input[type="radio"]');
      inputs.forEach(input => input.checked = false);
      screens[currentScreen].style.display = 'none';
      currentScreen = 0;
      screens[0].style.display = 'block';
      screens[0].style.transform = 'translateX(0)';
      updateNextButtonState();
      updateNavButtons();
    }

    nextBtn.addEventListener('click', () => {
      if (currentScreen < vraagSchermen.length) {
        const selected = document.querySelector(`input[name="question${currentScreen}"]:checked`);
        if (!selected) return;
      }
      if (currentScreen < screens.length - 1) {
        animateTransition(currentScreen + 1, 'next');
      }
    });

    prevBtn.addEventListener('click', () => {
      if (currentScreen === screens.length - 1) {
        resetQuiz();
      } else if (currentScreen > 0) {
        animateTransition(currentScreen - 1, 'prev');
      }
    });

    updateNextButtonState();
    updateNavButtons();

    function startMatrix() {
      const canvas = document.getElementById("matrix");
      const ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      const words = ["print","python","pip","break","assert","del","elif","global","lambda","nonlocal","raise","except","yield","with","bool","await", "async","def", "str", "int", "for", "in", "continue", "False", "True", "or", "and", "not", "class", "input", "import", "from"];
      const fontSize = 16;
      const columnWidth = 45;
      const columns = Math.floor(canvas.width / columnWidth);
      const drops = Array.from({ length: columns }, () => Math.floor(Math.random() * canvas.height / fontSize));

      function draw() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.05)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = "#0F0";
        ctx.font = fontSize + "px arial";
        for (let i = 0; i < drops.length; i++) {
          const text = words[Math.floor(Math.random() * words.length)];
          ctx.fillText(text, i * columnWidth, drops[i] * fontSize);
          if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
            drops[i] = 0;
          }
          drops[i]++;
        }
      }
      setInterval(draw, 66);
    }
  </script>
</body>
</html>
